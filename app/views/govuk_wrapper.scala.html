@import uk.gov.hmrc.renderer.TemplateRenderer

@(appConfig: config.AppConfig,
  title: String,
  mainClass: Option[String] = None,
  bodyClasses: Option[String] = None,
  sidebar: Html = HtmlFormat.empty,
  contentHeader: Option[Html] = None,
  mainContent: Html = HtmlFormat.empty,
  scriptElem: Option[Html] = None,
  showLogout: Boolean = true,
  gaDimensions: Option[Map[String, Any]] = None,
  articleEnabled: Boolean = true
  )(implicit request: Request[_], messages: Messages, context: config.PlaContext, FormPartialRetriever: uk.gov.hmrc.play.partials.FormPartialRetriever, templateRenderer: TemplateRenderer)

@import uk.gov.hmrc.play.views.html.{layouts => uiLayouts}
@import uk.gov.hmrc.play.views.html.{helpers => uiHelpers}
@import play.api.i18n._
@import play.twirl.api.Html


@mustacheCheck(str: String) = @{
if(str.trim=="") false else str
}


@scriptElement = @{
    Seq(
        Map("url" -> controllers.routes.Assets.at("javascripts/exitSurvey.js")),
        Map("url" -> controllers.routes.Assets.at("javascripts/pla.js"))
    )
}

@linkElems = @{
    Map(
        "url" -> controllers.routes.Assets.at("stylesheets/pla.css")
    )
}

@links = @{
    if(showLogout) {
        Map("url" -> routes.AccountController.signOut , "text" -> Messages("pla.links.signout"))
    }
}

@navTitle = @{
    Some(Messages("pla.base.appName"))
}
@betaHeaderEnable = @{
    false
}

@googleAnalytics = @{
    Map[String, Any](
        "trackingId" -> Some(appConfig.analyticsToken),
        "cookieDomain" -> appConfig.analyticsHost
    ) ++ gaDimensions.getOrElse(Map.empty)
}

@article = @{

    if(articleEnabled) {
            uiLayouts.article(mainContent, false, bodyClasses)
    } else {
            mainContent
    }
}

@mainContentHeader = @{
        contentHeader
}

@getHelpForm = {
      @FormPartialRetriever.getPartialContent(context.getPageHelpPartial()(messages))
}



@{
templateRenderer.renderDefaultTemplate(article, Map[String, Any](
"pageTitle" -> title,
"linkElems" -> linkElems,
"scriptElems" -> scriptElement,
"mainClass" -> mainClass,

"mainContentHeader" -> mainContentHeader,

"googleAnalytics" -> googleAnalytics,
"ssoUrl" -> None,

"betaBanner" -> betaHeaderEnable,
"feedbackIdentifier" -> "PLA",
"includeHMRCBranding" -> true,

"showLastLogInStatus" ->  false,

"getHelpForm" -> getHelpForm,

"navTitle" -> navTitle,
"navLinks" -> links,
"hasNavLinks" -> true,
"sidebar" -> sidebar,

"optimizelyProjectId" -> "8421961441"
)
)
}
