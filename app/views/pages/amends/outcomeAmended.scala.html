@*
 * Copyright 2023 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import models.AmendResultDisplayModel
@import models.amendModels.AmendsGAModel
@import play.api.i18n._
@import enums.ApplicationType
@import views.pages.ViewConstants

@this(
layout: Layout,
resultAmendDetails: playHelpers.templates.resultAmendDetails
)

@(model: AmendResultDisplayModel)(implicit request: Request[_], messages: Messages)

@layout(
pageTitle = messages("pla.amendsResultPage.title")
) {


<div class="govuk-panel govuk-panel--confirmation">
		<h1 class="govuk-panel__title">
				@messages(s"amendCode.${model.notificationId}.heading")
		</h1>
		<div class="govuk-panel__body">
				<div id="amendedAllowanceText">@messages("pla.amendsResultPage.allowanceSubHeading")</div><strong id="protectedAmount">@model.protectedAmount</strong>
		</div>
</div>
      @if(ViewConstants.amendmentCodesForInsetText.contains(model.notificationId)) {
		<div class="govuk-inset-text">
				<p>@messages(s"amendCode.${model.notificationId}.insetText")</p>
				@if(ViewConstants.amendmentCodesForSecondInsetText.contains(model.notificationId)) {
				     <p>@messages(s"amendCode.${model.notificationId}.insetText2")</p>
				}
		</div>
}
<h2 class="govuk-heading-m">@messages("pla.amendsResultPage.protectionDetails")</h2>

@model.details.map{ details =>
@resultAmendDetails(details)
}
<p class="govuk-body">@messages("pla.amendsResultPage.printGuidancePara")</p>
<p class="govuk-body"><a class="govuk-link" id="printPage" href="@controllers.routes.PrintController.printView" target="_blank" rel="noopener noreferrer">@messages("pla.amendsResultPage.printLink")</a></p>

<h2 class="govuk-heading-m">@messages("pla.amendsResultPage.changeDetails")</h2>
@if(ViewConstants.changeDetailsOnePara.contains(model.notificationId)) {
<p class="govuk-body">
		@messages("pla.amendsResultPage.changeDetailsParaBeforeLink")
		<a class="govuk-link" href="https://www.gov.uk/find-hmrc-contacts/pension-schemes-general-enquiries">@messages("pla.amendsResultPage.changeDetailsLink")</a>
		@messages("pla.amendsResultPage.changeDetailsParaAfterLink")
</p>
}
@if(ViewConstants.changeDetailsTwoPara.contains(model.notificationId)) {
<p class="govuk-body">
		@messages(s"amendCode.${model.notificationId}.changeDetailsPara")
</p>
<p class="govuk-body">
		@messages("pla.amendsResultPage.changeDetailsSubHeadingBeforeLink")
		<a class="govuk-link" href="https://www.gov.uk/find-hmrc-contacts/pension-schemes-general-enquiries">@messages("pla.amendsResultPage.changeDetailsSubHeadingLink")</a>
		@messages("pla.amendsResultPage.changeDetailsSubHeadingAfterLink")
</p>
<ul class="govuk-list govuk-list--bullet">
		<li>@messages(s"amendCode.${model.notificationId}.bulletPointOne")</li>
		<li>@messages(s"amendCode.${model.notificationId}.bulletPointTwo")</li>
</ul>
<p class="govuk-body">
		<a class="govuk-link" href="https://www.gov.uk/guidance/losing-your-lifetime-allowance-protection">@messages("pla.amendsResultPage.whatToDoLink")</a>
</p>

}

<p class="govuk-body">
		@messages("pla.amendsResultPage.viewDetails.beforeLink")
		<a class="govuk-link" href="@controllers.routes.ReadProtectionsController.currentProtections">@messages("pla.amendsResultPage.viewDetails.linkText")</a>
		@messages("pla.amendsResultPage.viewDetails.afterLink")
</p>

<h2 class="govuk-heading-m">@messages("pla.amendsResultPage.giveFeedback")</h2>

<p class="govuk-body"><a class="govuk-link" id="submit-survey-button" href=@controllers.routes.AccountController.signOut role="button" onclick="submitExitSurvey()">
		@messages("pla.amendsResultPage.exitSurveyLinkText")</a> @messages("pla.amendsResultPage.exitSurvey")</p>

}




